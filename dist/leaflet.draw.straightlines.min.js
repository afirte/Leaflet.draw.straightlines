!function(){function n(n){var t;return l.eachLayer(function(a){a instanceof n&&(t=a)}),t}function t(n){var t=Math.abs(n.lat-o.lat),a=Math.abs(n.lng-o.lng);return a>t}var a,e,o,l,i,g=L.Draw.Polyline.prototype._onMouseMove;window.onkeydown=function(n){e=n.ctrlKey},window.onkeyup=function(){e=!1},L.Draw.Polyline.prototype._onMouseMove=function(n){if(g.call(this,n),!i&&e&&a){var r=l.latLngToLayerPoint(a.getLatLng());t(n.latlng)?(a.setLatLng(L.latLng(o.lat,a.getLatLng().lng)),n.layerPoint.y=r.y):(a.setLatLng(L.latLng(a.getLatLng().lat,o.lng)),n.layerPoint.x=r.x),this._updateGuide(n.layerPoint),a.update()}},L.Map.prototype.initStraightLines=function(){l=this,l.on("dragstart",function(){i=!0}),l.on("dragend",function(){i=!1}),l.on("mouseup",function(l){i||setTimeout(function(){var i=n(L.Polyline);if(a=n(L.Marker)){if(e&&i){var g=i.getLatLngs();o&&g.length&&(t(l.latlng)?(g[g.length-1].lat=o.lat,g[g.length-2].lat=o.lat):(g[g.length-1].lng=o.lng,g[g.length-2].lng=o.lng),i.redraw(),a.update())}o=a.getLatLng()}})})}}();
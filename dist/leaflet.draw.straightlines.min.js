!function(n){"use strict";function t(n){var t=null;return i.eachLayer(function(o){o instanceof n&&(t=o)}),t}function o(n,t){var o,a;o=n.x?n:i.latLngToLayerPoint(n),a=t.x?t:i.latLngToLayerPoint(t);var e=Math.abs(o.x-a.x),r=Math.abs(o.y-a.y);return r<e}var a,e,i,r,u=n.Draw.Polyline.prototype._onMouseMove;window.onkeydown=function(n){"function"==typeof r&&(a=r(n))},window.onkeyup=function(){a=!1},n.Draw.Polyline.prototype._onMouseMove=function(r){if(u.call(this,r),a&&!e){var l=t(n.Marker);if(l){var y=l.getLatLng(),f=i.latLngToLayerPoint(y);o(r.layerPoint,f)?r.layerPoint.y=f.y:r.layerPoint.x=f.x,this._updateGuide(r.layerPoint)}}},n.Map.prototype.initStraightLines=function(u){u=u||{},r=u.start||function(n){return n.ctrlKey},i=this,i.on("dragstart",function(){e=!0}),i.on("dragend",function(){e=!1}),i.on("mouseup",function(){setTimeout(function(){if(a&&!e){var i=t(n.Polyline);if(i){var r=i.getLatLngs()[0],u=r[r.length-1],l=r[r.length-2];o(u,l)?u.lat=l.lat:u.lng=l.lng,i.redraw();var y=t(n.Marker);y&&y.update()}}})})}}(window.L);
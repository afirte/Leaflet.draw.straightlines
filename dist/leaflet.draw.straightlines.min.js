!function(){function t(t,a){a=a||r;var n=Math.abs(t.lat-a.lat),e=Math.abs(t.lng-a.lng);return e>n}var a,n,r,e,o,g,l=L.Draw.Polyline.prototype._onMouseMove,i=L.Handler.MarkerDrag.prototype._onDrag,s=L.Handler.MarkerDrag.prototype._onDragStart;window.onkeydown=function(t){n=t.ctrlKey},window.onkeyup=function(){n=!1},L.Draw.Polyline.prototype._onMouseMove=function(g){if(l.call(this,g),!o&&n&&a){var i=e.latLngToLayerPoint(a.getLatLng());t(g.latlng)?(a.setLatLng(L.latLng(r.lat,a.getLatLng().lng)),g.layerPoint.y=i.y):(a.setLatLng(L.latLng(a.getLatLng().lat,r.lng)),g.layerPoint.x=i.x),this._updateGuide(g.layerPoint),a.update()}},L.Handler.MarkerDrag.prototype._onDragStart=function(t){s.call(this,t),g=e.layerPointToLatLng(t.target._newPos)},L.Handler.MarkerDrag.prototype._onDrag=function(a){i.call(this,a),o||n&&(L.Handler.MarkerDrag.prototype._onDragEnd=function(){},this._marker.setLatLng(t(this._marker.getLatLng(),g)?L.latLng(g.lat,this._marker.getLatLng().lng):L.latLng(this._marker.getLatLng().lat,g.lng)),this._marker.update(),this._marker.fire("move",{latlng:this._marker.getLatLng()}).fire("drag"))},L.Map.prototype.initStraightLines=function(){e=this,e.on("dragstart",function(){o=!0}),e.on("dragend",function(){o=!1})}}();